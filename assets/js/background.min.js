function getRandomDuration() { return Math.round(80 * Math.random()) } function draw() { bgx.clearRect(0, 0, bg.width, bg.height), elems.forEach(function (n, t) { elems[t].duration-- < 0 && (elems[t].old ? elems[t] = elems[t].old : elems[t] = { origX: Math.random(), origY: Math.random(), motif: parts[Math.round(Math.random() * (parts.length - 1))], opacity: .5 * Math.random() + .5, duration: getRandomDuration() }, n = elems[t]), Math.random() < .001 && (elems[t] = { origX: Math.random(), origY: Math.random(), motif: parts[Math.round(Math.random() * (parts.length - 1))], duration: 10 * Math.random(), opacity: .5 * Math.random() + .5, old: n }, n = elems[t]); var a = n.origX * bg.width - 100, o = n.origY * bg.height; bgx.beginPath(), bgx.moveTo(n.motif[0][0] + a, n.motif[0][1] + o), n.motif.forEach(function (n) { bgx.lineTo(n[0] + a, n[1] + o) }), bgx.fillStyle = "rgba(15,25,35," + n.opacity + ")", bgx.fill() }) } function repeatOften() { draw(), requestAnimationFrame(repeatOften) } function resizeBackground() { if (void 0 !== bg) { bg.width = window.innerWidth, bg.height = window.innerHeight, elems = []; for (var n = 0; n < 30; n++)elems.push({ origX: Math.random(), origY: Math.random(), motif: parts[Math.round(Math.random() * (parts.length - 1))], duration: getRandomDuration(), opacity: .5 * Math.random() + .5, old: !1 }) } } !function () { for (var n = 0, t = ["webkit", "moz"], a = 0; a < t.length && !window.requestAnimationFrame; ++a)window.requestAnimationFrame = window[t[a] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[t[a] + "CancelAnimationFrame"] || window[t[a] + "CancelRequestAnimationFrame"]; window.requestAnimationFrame || (window.requestAnimationFrame = function (t, a) { var o = (new Date).getTime(), e = Math.max(0, 16 - (o - n)), i = window.setTimeout(function () { t(o + e) }, e); return n = o + e, i }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function (n) { clearTimeout(n) }) }(); var parts = [[[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [60, 30], [60, 60], [30, 60], [30, 30], [0, 30]], [[0, 0], [30, 0], [30, 30], [60, 30], [60, 60], [30, 60], [30, 30], [0, 30]], [[0, 0], [80, 0], [80, 6], [0, 6]], [[0, 0], [80, 0], [80, 6], [0, 6]], [[0, 0], [80, 0], [80, 6], [0, 6]], [[0, 0], [150, 0], [150, 5], [0, 5]], [[0, 0], [150, 0], [150, 5], [0, 5]], [[0, 0], [250, 0], [250, 5], [0, 5]], [[0, 0], [250, 0], [250, 5], [0, 5]], [[0, 0], [200, 0], [200, 3], [0, 3]], [[0, 0], [200, 0], [200, 3], [0, 3]], [[0, 0], [200, 0], [200, 3], [0, 3]], [[0, 0], [400, 0], [400, 1], [0, 1]], [[0, 0], [400, 0], [400, 1], [0, 1]], [[30, 0], [60, 0], [60, 30], [30, 30], [30, 60], [0, 60], [0, 30], [30, 30]], [[30, 0], [60, 0], [60, 30], [30, 30], [30, 60], [0, 60], [0, 30], [30, 30]], [[0, 0], [80, 0], [80, 15], [160, 15], [160, 0], [550, 0], [550, 24], [420, 24], [420, 50], [395, 50], [395, 15], [320, 15], [320, 50], [12, 50], [12, 35], [0, 35]], [[0, 0], [390, 0], [390, 15], [470, 15], [470, 0], [550, 0], [550, 35], [538, 35], [538, 50], [230, 50], [230, 15], [155, 15], [155, 50], [130, 50], [130, 24], [0, 24]], [[0, 0], [400, 0], [460, 90], [410, 90], [470, 180], [520, 180], [600, 300], [280, 300], [213.3, 200], [133.3, 200], [40, 60], [100, 60], [93.3, 50], [33.3, 50]], [[200, 0], [600, 0], [546.7, 80], [506.7, 80], [453.4, 160], [493.4, 160], [400, 300], [0, 300], [26.7, 260], [76.7, 260], [190, 90], [140, 90]]], bg = document.createElement("canvas"); bg.id = "background", bg.width = window.innerWidth, bg.height = window.innerHeight; for (var bgx = bg.getContext("2d"), elems = [], i = 0; i < 30; i++)elems.push({ origX: Math.random(), origY: Math.random(), motif: parts[Math.round(Math.random() * (parts.length - 1))], duration: getRandomDuration(), opacity: .5 * Math.random() + .5, old: !1 }); draw(), document.body.appendChild(bg), requestAnimationFrame(repeatOften), window.onresize = resizeBackground;